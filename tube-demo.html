<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PROCASSEF - Tube Progress Demo</title>
    
    <!-- Tailwind CSS -->
    <link href="https://unpkg.com/tailwindcss@^2.2.19/dist/tailwind.min.css" rel="stylesheet">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/tubeProgress.css">
    
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f5f7fb;
        }
        
        .demo-card {
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.08);
            transition: all 0.3s ease;
        }
        
        .demo-card:hover {
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transform: translateY(-2px);
        }
    </style>
</head>
<body>
    <header class="bg-white shadow-sm">
        <div class="container mx-auto px-4 py-3">
            <h1 class="text-xl font-bold text-gray-800">PROCASSEF - Tube Progress Demo</h1>
            <p class="text-sm text-gray-600">Démonstration des indicateurs de progression en tube</p>
        </div>
    </header>
    
    <main class="container mx-auto px-4 py-6">
        <!-- Demo Controls -->
        <div class="bg-white p-4 rounded-lg shadow-sm mb-6">
            <div class="flex flex-wrap items-center space-x-4">
                <div>
                    <label for="demoTubePercentage" class="block text-sm text-gray-600 mb-1">Pourcentage</label>
                    <input type="range" id="demoTubePercentage" min="0" max="100" value="65" class="w-32">
                    <span id="percentageValue" class="ml-2">65%</span>
                </div>
                
                <div>
                    <label for="demoTubeColor" class="block text-sm text-gray-600 mb-1">Couleur</label>
                    <select id="demoTubeColor" class="bg-white border border-gray-300 rounded-md px-3 py-1">
                        <option value="primary">Bleu (Primary)</option>
                        <option value="success">Vert (Success)</option>
                        <option value="warning">Orange (Warning)</option>
                        <option value="danger">Rouge (Danger)</option>
                        <option value="info">Cyan (Info)</option>
                    </select>
                </div>
                
                <div>
                    <label for="demoTubeSize" class="block text-sm text-gray-600 mb-1">Taille</label>
                    <select id="demoTubeSize" class="bg-white border border-gray-300 rounded-md px-3 py-1">
                        <option value="normal">Normal</option>
                        <option value="large">Large</option>
                        <option value="small">Small</option>
                    </select>
                </div>
                
                <button id="applyChangesBtn" class="mt-5 bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md">
                    Appliquer
                </button>
            </div>
        </div>
        
        <!-- Tube Demos -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            <!-- Demo Tube -->
            <div class="demo-card bg-white p-4">
                <h3 class="text-lg font-semibold text-gray-700 mb-4">Tube Dynamique</h3>
                
                <div id="demoTube" class="tube-container"></div>
            </div>
            
            <!-- Daily Target Example -->
            <div class="demo-card bg-white p-4">
                <h3 class="text-lg font-semibold text-gray-700 mb-4">Objectif Quotidien</h3>
                
                <div id="dailyExampleTube" class="tube-container"></div>
            </div>
            
            <!-- Weekly Target Example -->
            <div class="demo-card bg-white p-4">
                <h3 class="text-lg font-semibold text-gray-700 mb-4">Objectif Hebdomadaire</h3>
                
                <div id="weeklyExampleTube" class="tube-container"></div>
            </div>
        </div>
        
        <!-- Multiple Sizes Demo -->
        <h2 class="text-xl font-bold text-gray-800 my-6">Différentes Tailles</h2>
        
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            <!-- Small Tube -->
            <div class="demo-card bg-white p-4">
                <h3 class="text-lg font-semibold text-gray-700 mb-4">Petit (Small)</h3>
                
                <div id="smallTube" class="tube-container tube-small"></div>
            </div>
            
            <!-- Normal Tube -->
            <div class="demo-card bg-white p-4">
                <h3 class="text-lg font-semibold text-gray-700 mb-4">Normal</h3>
                
                <div id="normalTube" class="tube-container"></div>
            </div>
            
            <!-- Large Tube -->
            <div class="demo-card bg-white p-4">
                <h3 class="text-lg font-semibold text-gray-700 mb-4">Grand (Large)</h3>
                
                <div id="largeTube" class="tube-container tube-large"></div>
            </div>
        </div>
        
        <!-- Color Variations Demo -->
        <h2 class="text-xl font-bold text-gray-800 my-6">Variations de Couleurs</h2>
        
        <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-6">
            <!-- Primary Tube -->
            <div class="demo-card bg-white p-4">
                <h3 class="text-lg font-semibold text-gray-700 mb-4">Primary</h3>
                
                <div id="primaryTube" class="tube-container"></div>
            </div>
            
            <!-- Success Tube -->
            <div class="demo-card bg-white p-4">
                <h3 class="text-lg font-semibold text-gray-700 mb-4">Success</h3>
                
                <div id="successTube" class="tube-container"></div>
            </div>
            
            <!-- Warning Tube -->
            <div class="demo-card bg-white p-4">
                <h3 class="text-lg font-semibold text-gray-700 mb-4">Warning</h3>
                
                <div id="warningTube" class="tube-container"></div>
            </div>
            
            <!-- Danger Tube -->
            <div class="demo-card bg-white p-4">
                <h3 class="text-lg font-semibold text-gray-700 mb-4">Danger</h3>
                
                <div id="dangerTube" class="tube-container"></div>
            </div>
            
            <!-- Info Tube -->
            <div class="demo-card bg-white p-4">
                <h3 class="text-lg font-semibold text-gray-700 mb-4">Info</h3>
                
                <div id="infoTube" class="tube-container"></div>
            </div>
        </div>
    </main>
    
    <footer class="bg-white border-t border-gray-200 py-4 mt-8">
        <div class="container mx-auto px-4">
            <p class="text-sm text-gray-600 text-center">
                &copy; 2023 PROCASSEF - Projet Cadastre et Sécurisation Foncière du Sénégal
            </p>
        </div>
    </footer>
    
    <!-- Scripts -->
    <script src="js/tubeProgress.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Initialize tubeProgressService if it exists
            if (window.tubeProgressService) {
                console.log('Initializing tube demos...');
                
                // Initialize dynamic demo tube
                tubeProgressService.initializeTube('demoTube', {
                    title: 'Tube Dynamique',
                    currentValue: 650,
                    targetValue: 1000,
                    percentage: 65,
                    gap: -350,
                    status: 'warning',
                    color: 'primary'
                });
                
                // Initialize example tubes
                tubeProgressService.initializeTube('dailyExampleTube', {
                    title: 'Objectif Quotidien',
                    currentValue: 350,
                    targetValue: 832.77,
                    percentage: 42,
                    gap: -482.77,
                    status: 'warning',
                    color: 'primary'
                });
                
                tubeProgressService.initializeTube('weeklyExampleTube', {
                    title: 'Objectif Hebdomadaire',
                    currentValue: 4200,
                    targetValue: 5829.39,
                    percentage: 72,
                    gap: -1629.39,
                    status: 'success',
                    color: 'warning'
                });
                
                // Initialize size variations
                tubeProgressService.initializeTube('smallTube', {
                    title: 'Petit',
                    currentValue: 55,
                    targetValue: 100,
                    percentage: 55,
                    gap: -45,
                    status: 'warning',
                    color: 'primary'
                });
                
                tubeProgressService.initializeTube('normalTube', {
                    title: 'Normal',
                    currentValue: 55,
                    targetValue: 100,
                    percentage: 55,
                    gap: -45,
                    status: 'warning',
                    color: 'primary'
                });
                
                tubeProgressService.initializeTube('largeTube', {
                    title: 'Grand',
                    currentValue: 55,
                    targetValue: 100,
                    percentage: 55,
                    gap: -45,
                    status: 'warning',
                    color: 'primary'
                });
                
                // Initialize color variations
                tubeProgressService.initializeTube('primaryTube', {
                    title: 'Primary',
                    currentValue: 65,
                    targetValue: 100,
                    percentage: 65,
                    gap: -35,
                    status: 'warning',
                    color: 'primary'
                });
                
                tubeProgressService.initializeTube('successTube', {
                    title: 'Success',
                    currentValue: 85,
                    targetValue: 100,
                    percentage: 85,
                    gap: -15,
                    status: 'success',
                    color: 'success'
                });
                
                tubeProgressService.initializeTube('warningTube', {
                    title: 'Warning',
                    currentValue: 60,
                    targetValue: 100,
                    percentage: 60,
                    gap: -40,
                    status: 'warning',
                    color: 'warning'
                });
                
                tubeProgressService.initializeTube('dangerTube', {
                    title: 'Danger',
                    currentValue: 35,
                    targetValue: 100,
                    percentage: 35,
                    gap: -65,
                    status: 'danger',
                    color: 'danger'
                });
                
                tubeProgressService.initializeTube('infoTube', {
                    title: 'Info',
                    currentValue: 75,
                    targetValue: 100,
                    percentage: 75,
                    gap: -25,
                    status: 'info',
                    color: 'info'
                });
                
                // Set up demo controls
                const percentageSlider = document.getElementById('demoTubePercentage');
                const percentageValue = document.getElementById('percentageValue');
                const colorSelect = document.getElementById('demoTubeColor');
                const sizeSelect = document.getElementById('demoTubeSize');
                const applyButton = document.getElementById('applyChangesBtn');
                
                percentageSlider.addEventListener('input', (e) => {
                    percentageValue.textContent = `${e.target.value}%`;
                });
                
                applyButton.addEventListener('click', () => {
                    const percentage = parseInt(percentageSlider.value);
                    const color = colorSelect.value;
                    const size = sizeSelect.value;
                    const currentValue = Math.round(percentage * 10); // Just for demo
                    const targetValue = 1000;
                    const gap = currentValue - targetValue;
                    
                    // Update the demo tube
                    tubeProgressService.updateTube('demoTube', {
                        currentValue,
                        targetValue,
                        percentage,
                        gap,
                        status: percentage >= 75 ? 'success' : percentage >= 50 ? 'warning' : 'danger',
                        color
                    });
                    
                    // Update tube size
                    const tubeElement = document.getElementById('demoTube');
                    tubeElement.classList.remove('tube-small', 'tube-large');
                    
                    if (size === 'small') {
                        tubeElement.classList.add('tube-small');
                    } else if (size === 'large') {
                        tubeElement.classList.add('tube-large');
                    }
                });
            } else {
                console.error('Tube Progress Service not available');
                document.body.innerHTML = '<div class="p-6 text-center"><h1 class="text-xl text-red-600">Tube Progress Service not available</h1><p>Please ensure tubeProgress.js is properly loaded</p></div>';
            }
        });
    </script>
</body>
</html>
